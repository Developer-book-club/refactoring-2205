# CH.08 기능 이동

요소를 다른 컨텍스트로 옮기는일

# 8.1 함수 옮기기

## 키워드

모듈성,

## 중요 내용

- 모듈성이란 프로그램의 어딘가를 수정하려할때 해당 기능과 깊이 관련된 작은 일부만 이해해도 가능하게 해주는 능력
- 요소를 많이 사용하는 모듈에 함수를 옮긴다. (인접성)
- 잘맞지 않다면 언제든지 옮길수있다(옮겨야한다)
- 중첩함수를 사용하다보면 숨겨진 데이터끼리 상호 의존하기가 쉬우니 중첩함수는 만들지말자
-

## 내 생각

- 마틴파울러가 꾸준히 강조하는 지점이 "곧바로 수정" 이라는 것을 다시 한 번 느꼈다.

# 8.2 필드 옮기기

## 중요 내용

- 현재 데이터 구조가 적절치 않음을 깨닫게 되면 곧바로 수정해야한다.
- 상호관계가 명확하게 드러나도록 한 레코드에 담는게 좋다.
- 데이터의 위치를 옮기더라도 접근자만 그에 맞게 수정하면 클라이언트 코드들은 아무 수정없이 동작한다.
- publice 세터를 만들고 싶지 않아서 세터 속성이 아니라 메서드를 이용했다.
  -> 세터와 메서드 차이가 뭘까?

# 8.3 문장을 함수로 옮기기

## 중요 내용

- 중복을 제거하는 리팩토링
- 문장들을 옮기려면 그 문장들이 피로출 함수의 일부라는 확신이 있어야한다.

## 내 생각

- recoil 의 selector 가 이 리팩토링 기법을 따른 게 아닐까?

# 8.4 문장을 호출한 곳으로 옮기기

## 중요 내용

- 여러 곳에서 사용하던 기능이 일부 호출자에게는 다르게 동작하도록 바뀌어야한다면

# 8.5 인라인 코드를 함수 호출로 바꾸기

## 중요 내용

- 이미 존재하는 함수와 똑같은 일을 하는 인라인 코드를 발견하면 보통은 해당코드를 함수 호출로 변경하길 원한다.
- 기존함수를 수정하더라도 인라인 코드의 동작은 바뀌지 않아야할때 뿐이다.
- 함수의 이름이 적절하지않거나 이해가 되지 않다면 그 함수의 목적이 인라인 코드의 목적과 다르기 때문이다.
- 함수 추출하기와 이것의 차이는 코드를 대체할수 있는 함수가 이미 존재하느냐의 여부다. (js 내장함수 처럼)

## 내생각

- 고차함수들을 이용해서 이 리팩토링을 많이 했던 것 같다.

# 8.6 문장 슬라이드 하기

## 중요 내용

- 관련된 코드들이 가까이 모여있다면 이해하기 쉽다.
- 모든 변수 선언을 함수 첫머리에 모아두는 사람도 있는데
  -> 나도 파울러처럼 변수를 처음 사용할 때 선언하는 스타일이다.

- 이 작업은 함수 추출하기의 준비단계로 자주 행해진다.
- 무엇을 슬라이드할지, 슬라이드 할수 있는지? 를 생각해보자
  -> 슬라이드 할 때 부수효과(사이드이펙트) 가 있는지 살펴봐야할 것이다.

- 슬라이드 후 테스트가 실패했을 때 가장 좋은 대처는 더 작게 슬라이드 해보는것이다. (열줄을 건너뛰는대신 다섯 줄만 건너 뛰거나)

# 8.7 반복문 쪼개기

- 종종 반복문 하나에 두가지일을 수행하는 모습을 보게된다. (한꺼번에 처리할수있다는 이유에서)
- 이것과 함수 추출하기는 연이어 수행하는 일이 잦다.

## 내생각

- 이 실수는 내가 가장 많이 했던 실수였던 것 같다.
- 코딩테스트에서도 한꺼번에 반복문을 돌릴수있다면 하나의 반복문에 전부 때려넣었는데 -> 분리해도 시간 복잡도에는 영향이 없으므로 분리해서 짜면 좀더 수월하지 않을까 라는 생각도 들었다.

# 8.8 반복문을 파이프라인으로 바꾸기

- 파이프라인을 이용하면 처리 과정을 일련의 연산으로 표현할 수 있다.
- js 의 고차함수들 (map, filter) 들을 이용하면 좀 더 추상화된 표현으로 어떤 일을 단계적으로 하는지 읽기 쉬워진다.

# 8.9 죽은 코드 제거하기

- 코드가 더이상 사용되지 않게 된다면 지워야한다.
- 한때는 죽은 코드를 주석처리하는 방법이 널리 쓰였다.
- > (버전 관리 시스템때문에 더이상 필요하지 않은 이유는? 롤백이가능하기 때문인가?)
