# CH 09. 데이터 조직화

# 9.1 변수 쪼개기

## 요약

- 변수에도 역시 일종의 단일 책임 원칙의 적용이 필요하다. 다양한 용도로 쓰이지만 한가지만 할 수 있도록 해야 코드를 읽는 사람이 헷갈리지 않을 수 있다

## 중요 문장

- 변수는 다양한 용도로 쓰인다
- 변수는 긴 코드의 결과를 저장했다가 나중에 쉽게 참조하려는 목적으로 흔히 쓰인다 이런 변수는 값을 단 한번만 대입해야 한다.
- 역할이 둘 이상인 변수가 있다면 쪼개야 한다. 예외는 없다.

## 내 생각

- 책에서 지겹도록 변수 명을 잘지어야 한다는 얘기를 하고 있는데, 이 부분에서는 용도에 대해서 말하고 있다.
- 용도도 사실 이전에 주장하던 것과 큰 차이가 없다. 무조건 변수 하나당 하나의 용도로 사용되어야 하고, 재활용되선 안된다 역할이 두개라면 무조건 쪼개야한다
- 코드를 읽는 사람을 기준으로 어떻게 하면 안 헷갈리고 내 의도를 잘 전달할 수 있을까 라고 생각해본다면, 변수 또한 다양한 용도에 맞게 적절하게 써주어야 하고, 단 하나의 역할을 할 수 있도록 하며, 의도가 잘 드러날 수 있도록 작성해야만 한다

# 9.2 필드 이름 바꾸기

## 요약

- 리팩토링 패턴이라기 보다는 데이터 구조의 이름을 잘 짓는 것이 중요하기 때문에, 필드 이름 변경이 필요할 때는 더 적절한 이름으로 변경할 것을 권하고 있다

## 중요 문장

- 이름은 중요하다
- 데이터 구조는 프로그램을 이해하는데 큰 역할을 한다.
- 데이터 구조는 무슨 일이 벌어지는지를 이해하는 열쇠다.
- 데이터 구조가 중요한 만큼 반드시 깔끔하게 관리해야 한다.

## 내 생각

- 다른 부분도 마찬가지이지만, 이 책에서 주목해서 봐야할 점은 단순히 어떤 리팩토링 패턴이 있는지를 파악하는 것도 있지만, 내 생각에 저자가 어떤 생각을 가지고 코드를 고쳐나가는지를 이해하는 것이라고 생각한다 책에서의 예제는 간단한 하지만, 문제를 해결해 나가는 방법과 원리를 잘 익혀나간다면, 후에 더 큰 문제에서도 적절히 잘 적용할 수 있지 않을까? 하는 생각이다

# 9.3 파생 변수를 질의 함수로 바꾸기

## 중요 문장

- 가변 데이터의 유효 범위를 가능한 한 좁혀야 한다고 힘주어 주장해본다.
- 효과가 좋은 방법으로 값을 쉽게 계산해낼 수 있는 변수들을 모두 제거할 수 있다.
- 피연산자 데이터가 불변이라면 계산 결과도 일정하므로 역시 불변으로 만들 수 있다. 그래서 새로운 데이터 구조를 생성하는 변형 연산이라면 비록 계산 코드로 대체할 수 있더라도 그대로 두는 것도 좋다.
    - 데이터 구조를 감싸며 그 데이터에 기초하여 계산한 결과를 속성으로 제공하는 객체
    - 데이터 구조를 받아 다른 데이터 구조로 변환해 반환하는 함수

## 내 생각

- 가변 데이터의 스코프를 줄여야 다루기 쉬워진다는 의견에 동의한다
- 변형 연산이라고 하는 부분의 설명이 예제를 봐도 이해가 쉽지 않았다

# 9.4 참조를 값으로 바꾸기

## 요약

- 값으로 다루는 경우, 새로운 속성을 담은 객체로 기존 내부 객체를 통째로 대체하는 방식을 사용한다 - 불변한 값 객체로 사용하다고 적절하다고 판단 될 때, 참조가 아닌 값으로 주로 사용한다
    - 이 부분을 어떻게 판단해서 사용하는지 다른 자바스크립트 개발자분께 문의드리고 싶다

## 중요 문장

- 참조로 다루는 경우에는 내부 객체는 그대로 둔 채 그 객체의 속성만 갱신하며, 값으로 다루는 경우에는 새로운 속성을 담은 객체로 기존 내부 객체를 통째로 대체한다.
- 필드를 값으로 다룬다면 내부 객체의 클래스를 수정하여 값 객체로 만들 수 있다. 값 객체는 대체로 자유롭게 활용하기 좋은데 특히 불변이기 때문이다.

## 내 생각

- 참조냐 값이냐의 차이를 설명하는 부분이 처음에는 잘 이해가 되지 않았는데, 코드를 보면서 이해할 수 있었다.
    - 참조는 객체의 속성을 갱신하며, 반면에 값은 객체를 새로 만들어서 통째로 대체한다 코드를 보면 잘 알 수 있다
- 책의 예제에서는 전화번호를 불변으로 만들면서, 참조대신 값으로 다루는 것을 보여주고 있다, 이런 류의 자바스크립트 코드들이 실제로도 어떻게 실무에서 사용되는지 좀 궁금해졌다

# 9.5 값을 참조로 바꾸기

## 요약

- 값보다 참조로 바꾸어서 사용할 때가 있다 → 같은 데이터를 물리적으로 복제해서 사용할 때에 데이터를 갱신할 필요가 발생하는 경우 필요

## 중요 문장

- 논리적으로 같은 데이터를 물리적으로 복제해 사용할 때 가장 크게 문제되는 상황은 그 데이터를 갱신해야 할 때다.
- 이런 상황이라면 복제된 데이터들을 모두 참조로 바꿔주는 게 좋다.
- 클라이언트들의 접근을 관리해주는 일종의 저장소가 필요해진다. → 저장소 객체

## 내 생각

- 책에서는 Order, Customer 클래스를 통해서, 참조로 바꿔줘야하는 함을 말한다 이때 저장소 객체라는 개념을 사용한다 저장소에 customer data를 초기화 시켜 두고, 이미 생성된 고객 객체는 굳이 재생성하지 않고 재활용하려는 목적이다. 코드상으로 봤을 때는 어느정도 의도를 이해할수 있었지만, 아직 저장소 객체에 대해서 익숙하지 않아서, 관련된 자료들을 추가로 봐야할 필요가 있을 것 같다

# 9.6 매직 리터럴 바꾸기

## 요약

- 매직 리터럴은 상수로 추출해주자, 적절히 코드 맥락에 따라서 잘 판단하여서 추출하여 이름을 붙여주자

## 중요 문장

- 매직 리터럴 이란 소스 코드에 (보통은 여러곳에) 등장하는 일반적인 리터럴 값을 말한다.
- 하지만, 코드를 읽는 사람이 이 값의 의미를 모른다면 숫자 자체로는 의미를 명확히 알려주지 못하므로 매직 리터럴이라 할 수 있다. 의미를 알고 있다고 해도 결국 각자의 머리에서 해석해낸 것일 뿐이라서, 이보다는 코드 자체가 뜻을 분명하게 드러내는 게 좋다.
- 상수를 정의하고 숫자 대신 상수를 사용하도록 바꾸면 될 것이다.
- 상수를 과용하는 모습도 종종본다. const ONE = 1 같은 선언은 의미가 없다.
- 또한 리터럴이 함수 하나에서만 쓰이고, 그 함수가 맥락적 정보를 충분히 제공하여 헷갈릴 일이 없다면 상수로 바꿔 얻는 이득이 줄어든다.

## 내 생각

- 매직 리터럴은 코드에서 흔히 볼 수 있는 스멜 중 하나이다. 나 같은 경우는 리뷰를 할 때, 매직 리터럴 값은 무조건 상수로 추출하도록 요청한다
- 책의 내용 중에 함수 하나에서만 쓰이거나, 함수가 맥락적 정보를 충분히 제공하여 헷갈릴 일이 없다면 상수로 바꿔 얻는 이득이 줄어든다고 나와있긴 하나,, 이득이 줄어들 뿐 여전히 상수 추출하는 것이 이득이라고 생각한다.
- 상수 추출 시에 이름을 지을 때, 위의 예처럼 `ONE = 1` 같은 형태는 지양하는 것이 맞고, 맥락을 고려해서 적절한 이름을 지어주어야 한다